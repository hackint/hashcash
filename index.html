<!DOCTYPE HTML>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/>
    <title>hackint hashcash test</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
    <h1>Hackint anonymous user registration</h1>
    <div id="content">
      G'day! We wish your stay at hackint to be a pleasant
      one. Unfortunately, completely anonymous access can be and is
      being abused regularily. Ironically, in order to preserve
      anonymous access, we have to introduce a <strong>cost</strong>
      that each user wishing to stay anonymous has to pay before they
      can access hackint. This cost is paid for by means
      of <strong>computation time</strong>. All you have to do
      is <strong>keep this website open for a few hours</strong> and
      once the calculations are finished, you will be able to create a
      nickserv user on hackint using a web form. You will then use
      this user to connect to hackint via IRC and SASL.
    </div>
    <div style="border: thin dotted black" id="cputriezen">
      <h2>Calculating...</h2>
      <div>Core1: <div id="progress1"></div></div>
      <div>Core2: <div id="progress2"></div></div>
      <div>Core3: <div id="progress3"></div></div>
      <div>Core4: <div id="progress4"></div></div>
    </div>
    <div id="registration" style="display: none">
      Thank you very much for your patience. You may now register an
      account on hackint. Please pick a user name and a password.
      <form id="frmRegister">
	<div>Nickname:</div>
	<div><input type="text" name="nickname" value="" id="txtNickname" /></div>
	<div>Password:</div>
	<div><input type="password" name="nickpass" value="" id="txtNickpass" /></div>
	<div>Anti abuse code:</div>
	<div><input type="text" name="veronica" value="" id="txtVeronica" readonly="readonly" /></div>
      </form>
    </div>
    <script src="js/jquery-2.1.3.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script type="text/javascript">

      $(function() {
          var hasher1 = new Worker("js/hashcash.js");
          var hasher2 = new Worker("js/hashcash.js");
          var hasher3 = new Worker("js/hashcash.js");
          var hasher4 = new Worker("js/hashcash.js");
	  hasher1.postMessage(["07c3b48a53c31ed9cc2124a33fd954d1e73d4db3",
			       "9376c9c28b2a5f5de6bfe67b4e4b9e0dbe45cb27b163e9603cfb933d31bbfacc",
			       0, 250000]);
	  hasher2.postMessage(["07c3b48a53c31ed9cc2124a33fd954d1e73d4db3",
			       "9376c9c28b2a5f5de6bfe67b4e4b9e0dbe45cb27b163e9603cfb933d31bbfacc",
			       250001, 500000]);
	  hasher3.postMessage(["07c3b48a53c31ed9cc2124a33fd954d1e73d4db3",
			       "9376c9c28b2a5f5de6bfe67b4e4b9e0dbe45cb27b163e9603cfb933d31bbfacc",
			       500001, 750000]);
	  hasher4.postMessage(["07c3b48a53c31ed9cc2124a33fd954d1e73d4db3",
			       "9376c9c28b2a5f5de6bfe67b4e4b9e0dbe45cb27b163e9603cfb933d31bbfacc",
			       750001, 1000000]);
	  var onMessageFunction = function(progressID) {
	      return function(e) {
		  if (e.data["event"] == "finished") {
                      document.getElementById("txtVeronica").value = e.data["value"].toString();
                      document.getElementById("registration").style.display = "";
                      document.getElementById("cputriezen").style.display = "none";
                      hasher1.terminate();
                      hasher2.terminate();
                      hasher3.terminate();
                      hasher4.terminate();
		  } else if (e.data["event"] == "progress") {
		      document.getElementById(progressID).innerHTML = e.data["text"];
		  }
	      };
	  };
          hasher1.onmessage = onMessageFunction("progress1");
          hasher2.onmessage = onMessageFunction("progress2");
          hasher3.onmessage = onMessageFunction("progress3");
          hasher4.onmessage = onMessageFunction("progress4");
      });
    </script>
  </body>
</html>

